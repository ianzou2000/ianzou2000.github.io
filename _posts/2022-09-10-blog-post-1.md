---
title: '在众米量化的实习记录'
date: 2022-09-10
permalink: /posts/2022/09/blog-post-1/
tags:
  - intern
---
记录第二次实习，在众米量化做量化研究员。

修改时间：2023.5.6

## 想走Quant路
其实是在本科学习过程中，从大二开始，我发现自己不大喜欢撰写大量文字来分析行业/股票等这类任务，更喜欢建立数学模型来分析并解决金融行业中具体的问题，并且学数学课时往往会比学金融课程更感兴趣、更加专注，做作业也更有动力；），机缘巧合之下了解到有量化投资这一个方向，于是在小红书、B站和微信公众号上逐渐开始关注这个行业的动态与风向，也会去看一些相关的书，比如Emanuel Derman的My Life as a Quant、石川的因子投资、柯蒂斯的海龟交易法则等。了解越多，对其愈发感兴趣，因此在学校参加过两次企业来校开办的培训班，一个是国信iQuant，另一个是点宽。因为当时的知识储备与编程能力还不够，于是大二暑假我去海关做了第一份实习，锻炼了一下编程能力。到了大三暑假，我找到了第一份量化实习。考虑到本科阶段学习的知识，q-quant方向的不在考虑范围内，因此主要把方向集中在p-quant里。

## 在众米
众米量化是一家挺务实的公司，师兄（我的mentor）在我刚入职时和我说：“许多别的公司招实习生就是抓去挖因子，碰运气，挖到就赚钱，没挖到就走人。这种实习实际上是没有意义的，浪费彼此的时间。”

两个多月下来，师兄画的饼变成了现实。也许是公司比较小，实习生在他的亲自指导下能够一起同他开发交易模型、策略。刚进去的前半个月，我和另外一个朋友一组，分别独立完成了一个验证复原交易所订单簿可行性的实验。最后我们发现在深交所是可行的，但上交所无法复原，因为在交易所给券商的高频数据中没有像深交所那样存在一个关键的一一对应的表名，能够让trade和order信息连接起来，从而交易量匹配不上。刚进去总是紧张却又激动的，每天下午五点是开每日总结例会的时间，我们量化研究、开发部门的人挨个汇报自己今天的工作总结以及简单提一下明天工作的安排。这段时间我每天都在努力coding，然后跑一个具体的结果，让自己的工作量看起来充实一些。回过头看，push自己的这段时间成长挺快的。师兄时不时会来和我们一起讨论复原的流程，让我们确保都清楚需要哪些模块，每个模块的功能是什么。其中，最关键的两点是：1. 牢牢抓住“量钟”，也就是交易量。在高频的世界中，时间是最不可靠的，只有交易量才是可信的。2. 复原过程中，需要存在一个往回（后）看的模块，因为taq这个快照数据可能因为传送拥堵而延迟发送，导致我们收到的taq其实是过去的，因此我们自己累积的volume会比taq高，这时就需要往回找一找。做完这个项目，我们向部门做了一个pre，展示了项目的算法设计、结论，以及一些数据分析。

之后，师兄带我们做了一个关于用Kalman Filter开发一个套利策略的项目。因为上一个实习生做了一部分用格兰杰因果检验、协整分析找存在协整关系的股票对，但后来因为这部分太难直接跑路了，因此我们开始做她之后的工作（实际上后来师兄和我们说，我们两个是他带过那么多实习生里第一个能够把卡尔曼滤波一起搞明白做出来的，之前的都是觉得太难就没做了）。刚开始的第一周我们在读文献并实现卡尔曼滤波，并清楚我们的模型中Kalman Filter应扮演一个怎样的角色（找出两个股票之间真实的比例beta）。为什么非要用Kalman Filter，是因为想要能够动态地找出真实的均衡比例。后来，随着研究的进行，我们发现Kalman Filter实际上无法实现动态这一功能，因为在最开始确定了OU过程的那几个关键参数后，滤波的工作也就定型了，循环几轮后就已经收敛了，在那之后就无法自主地动态调参了。因此，我们转变了一下思路，引入滑动窗口回归确定初始参数，然后用Kalman Filter迭代找出最优参数，再用这个最优参数去找出真实的beta。实际上，经过数学推导后，我们发现这个最优参数就是EMA里的alpha，因此通过开发出这样的算法，我们的工作免去了之前需要暴力搜参，再用EMA平滑的过程。可是卡尔曼滤波找出的“最优参数”效果怎样呢？还需要进一步的实验与回测。

做到这一部分时，因为实习期满，就没有继续跟进后边的内容了，在这之前还探索了一下EM算法，用几何布朗运动模拟股价并创造协整股价序列，用OU过程模拟出协整序列之间具有均值回归性质的序列。
